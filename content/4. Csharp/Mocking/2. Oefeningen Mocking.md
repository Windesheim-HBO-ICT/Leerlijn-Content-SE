---
title: 2. Oefeningen Mocking
taxonomie:
  - ib-19.2-Mocking.DT
  - ib-19.3-Mocking.DT
---

> Meer informatie over [[1. Uitleg Mocking|mocking]]

## Opdracht 1
Maak een **mock**-object en roep een methode aan.

### Specificaties
- Maak een **mock** van een interface genaamd `ICalculator`.
- De interface heeft een methode `int Add(int a, int b)`.
- Stel in dat de methode altijd `10` retourneert, ongeacht de invoer.
- Roep de methode aan en print het resultaat.

### Verwachte output
```
10
```

### Nu jij
``` csharp runner
using System;
using Moq;

public interface ICalculator  
{  
    int Add(int a, int b);  
}  

var mockCalculator = new Mock\<ICalculator\>();

Console.WriteLine();
``` 

> [!info]- Mogelijke uitwerking
> ``` csharp
> using System;
> using Moq;
> 
> public interface ICalculator  
> {  
>     int Add(int a, int b);  
> }  
> 
> var mockCalculator = new Mock<ICalculator>();  
> mockCalculator.Setup(c => c.Add(It.IsAny<int>(), It.IsAny<int>())).Returns(10);  
> 
> Console.WriteLine(mockCalculator.Object.Add(5, 3));  
> ```

---

## Opdracht 2
Controleer of een methode is aangeroepen.

### Specificaties
- Maak een **mock** van `ILogger`.
- De interface bevat een methode `void Log(string message)`.
- Roep `Log("Testbericht")` aan.
- Controleer of `Log` is aangeroepen met de juiste parameter.

### Verwachte output
Als de methode wordt aangeroepen, komt in de console:
```
Methode werd aangeroepen!
```

### Nu jij
``` csharp runner
using System;
using Moq;

public interface ILogger  
{  
    void Log(string message);  
}  

var mockLogger = new Mock<ILogger>();  

Console.WriteLine();  
``` 

> [!info] Mogelijke uitwerking
> ```csharp
> using System;
> using Moq;
> 
> public interface ILogger  
> {  
>     void Log(string message);  
> }  
> 
> var mockLogger = new Mock<ILogger>();  
> mockLogger.Object.Log("Testbericht");  
>
> mockLogger.Verify(l => l.Log("Testbericht"), Times.Once);  
> Console.WriteLine("Log methode is aangeroepen met 'Testbericht'");  
> ```


---

## Opdracht 3
Simuleer een database-oproep met **mocking**.

### Specificaties
- Maak een **mock** van `IUserRepository`.
- De interface bevat een methode `string GetUserById(int id)`.
- Stel in dat `GetUserById(1)` de string `"Alice"` retourneert.
- Roep de methode aan en print het resultaat.

### Verwachte output
```
Gebruiker: Alice
```

### Nu jij
``` csharp runner
using System;
using Moq;

public interface IUserRepository  
{  
    string GetUserById(int id);  
}  

var mockRepo = new Mock<IUserRepository>();  

Console.WriteLine("Gebruiker: " + );  

``` 

> [!info]- Mogelijke uitwerking
> ``` csharp
> using System;
> using Moq;
> 
> public interface IUserRepository  
> {  
>     string GetUserById(int id);  
> }  
> 
> var mockRepo = new Mock<IUserRepository>();  
> mockRepo.Setup(repo => repo.GetUserById(1)).Returns("Alice");  
> 
> Console.WriteLine("Gebruiker: " + mockRepo.Object.GetUserById(1));  
> 
> ```

---

## Opdracht 4
Werken met uitzonderingen in **mocking**.

### Specificaties
- Maak een **mock** van IPaymentService.
- De interface bevat een methode void ProcessPayment(double amount).
- Stel in dat als het bedrag <= 0 is, een Exception wordt gegooid met "Ongeldig bedrag".
- Test de methode met een ongeldig bedrag.
- Vang de exception op en print het bericht.

### Verwachte output
```
Fout: Ongeldig bedrag
```

### Nu jij
``` csharp runner
using System;
using Moq;

public interface IPaymentService  
{  
    void ProcessPayment(double amount);  
}  

var mockPaymentService = new Mock<IPaymentService>();  
mockPaymentService
    .Setup()  
    .Throws();

try  
{  
}  
catch (Exception ex)  
{  
}
``` 

> [!info]- Mogelijke uitwerking
> ```csharp
> using System;
> using Moq;
> 
> public interface IPaymentService  
> {  
>     void ProcessPayment(double amount);  
> }  
> 
> var mockPaymentService = new Mock<IPaymentService>();  
> mockPaymentService  
>     .Setup(p => p.ProcessPayment(It.Is<double>(amount => amount <= 0)))  
>     .Throws(new Exception("Ongeldig bedrag"));  
> 
> try  
> {  
>     mockPaymentService.Object.ProcessPayment(0);  
> }  
> catch (Exception ex)  
> {  
>     Console.WriteLine("Fout: " + ex.Message);  
> }
> ```
